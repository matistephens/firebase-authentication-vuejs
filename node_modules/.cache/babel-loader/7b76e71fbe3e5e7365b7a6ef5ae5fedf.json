{"ast":null,"code":"import _objectWithoutProperties from \"/Users/matiasstephens/Desktop/vue/autenticacion-con-vue-y-firebase/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nimport _regeneratorRuntime from \"/Users/matiasstephens/Desktop/vue/autenticacion-con-vue-y-firebase/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _objectSpread from \"/Users/matiasstephens/Desktop/vue/autenticacion-con-vue-y-firebase/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"/Users/matiasstephens/Desktop/vue/autenticacion-con-vue-y-firebase/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _excluded = [\"id\"];\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport { DB } from '@/plugins/firebase';\nexport var usersModule = {\n  namespaced: true,\n  state: {\n    loading: false,\n    list: []\n  },\n  mutations: {\n    SET_LIST: function SET_LIST(state, newList) {\n      state.list = newList;\n    },\n    SET_LOADING: function SET_LOADING(state, newLoading) {\n      state.loading = newLoading;\n    }\n  },\n  actions: {\n    getAll: function getAll(_ref) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var commit, users$, users;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                commit = _ref.commit;\n                commit('SET_LOADING', true);\n                _context.prev = 2;\n                _context.next = 5;\n                return DB.collection('users').get();\n\n              case 5:\n                users$ = _context.sent;\n                users = [];\n                users$.forEach(function (document) {\n                  users.push(_objectSpread(_objectSpread({}, document.data()), {}, {\n                    id: document.id\n                  }));\n                });\n                commit('SET_LIST', users);\n                _context.next = 14;\n                break;\n\n              case 11:\n                _context.prev = 11;\n                _context.t0 = _context[\"catch\"](2);\n                console.error(_context.t0);\n\n              case 14:\n                _context.prev = 14;\n                commit('SET_LOADING', false);\n                return _context.finish(14);\n\n              case 17:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[2, 11, 14, 17]]);\n      }))();\n    },\n    updateOneById: function updateOneById(_ref2, _ref3) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var commit, id, newUser;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                commit = _ref2.commit;\n                id = _ref3.id, newUser = _objectWithoutProperties(_ref3, _excluded);\n                commit('SET_LOADING', true);\n                _context2.prev = 3;\n                _context2.next = 6;\n                return DB.collection(\"users\").doc(id).update(newUser);\n\n              case 6:\n                _context2.next = 11;\n                break;\n\n              case 8:\n                _context2.prev = 8;\n                _context2.t0 = _context2[\"catch\"](3);\n                console.error(e);\n\n              case 11:\n                _context2.prev = 11;\n                commit('SET_LOADING', false);\n                return _context2.finish(11);\n\n              case 14:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[3, 8, 11, 14]]);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["DB","usersModule","namespaced","state","loading","list","mutations","SET_LIST","newList","SET_LOADING","newLoading","actions","getAll","commit","collection","get","users$","users","forEach","document","push","data","id","console","error","updateOneById","newUser","doc","update","e"],"sources":["/Users/matiasstephens/Desktop/vue/autenticacion-con-vue-y-firebase/src/store/modules/usersModule.js"],"sourcesContent":["import { DB } from '@/plugins/firebase';\n\nexport const usersModule = {\n  namespaced: true,\n  state: {\n    loading: false,\n    list: [],\n  },\n  mutations: {\n    SET_LIST(state, newList) {\n      state.list = newList;\n    },\n    SET_LOADING(state, newLoading) {\n      state.loading = newLoading;\n    },\n  },\n  actions: {\n    async getAll({ commit }) {\n      commit('SET_LOADING', true);\n      try {\n        const users$ = await DB.collection('users').get();\n        const users = [];\n\n        users$.forEach((document) => {\n          users.push({ ...document.data(), id: document.id });\n        });\n\n        commit('SET_LIST', users);\n      } catch (e) {\n        console.error(e);\n      } finally {\n        commit('SET_LOADING', false);\n      }\n    },\n    async updateOneById({ commit }, {id, ...newUser}) {\n      commit('SET_LOADING', true);\n      try {\n        await DB.collection(\"users\").doc(id).update(newUser)\n      } catch (error) {\n        console.error(e)\n      } finally {\n        commit('SET_LOADING', false);\n      }\n    },\n  },\n};\n"],"mappings":";;;;;;;;AAAA,SAASA,EAAT,QAAmB,oBAAnB;AAEA,OAAO,IAAMC,WAAW,GAAG;EACzBC,UAAU,EAAE,IADa;EAEzBC,KAAK,EAAE;IACLC,OAAO,EAAE,KADJ;IAELC,IAAI,EAAE;EAFD,CAFkB;EAMzBC,SAAS,EAAE;IACTC,QADS,oBACAJ,KADA,EACOK,OADP,EACgB;MACvBL,KAAK,CAACE,IAAN,GAAaG,OAAb;IACD,CAHQ;IAITC,WAJS,uBAIGN,KAJH,EAIUO,UAJV,EAIsB;MAC7BP,KAAK,CAACC,OAAN,GAAgBM,UAAhB;IACD;EANQ,CANc;EAczBC,OAAO,EAAE;IACDC,MADC,wBACkB;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAVC,MAAU,QAAVA,MAAU;gBACvBA,MAAM,CAAC,aAAD,EAAgB,IAAhB,CAAN;gBADuB;gBAAA;gBAAA,OAGAb,EAAE,CAACc,UAAH,CAAc,OAAd,EAAuBC,GAAvB,EAHA;;cAAA;gBAGfC,MAHe;gBAIfC,KAJe,GAIP,EAJO;gBAMrBD,MAAM,CAACE,OAAP,CAAe,UAACC,QAAD,EAAc;kBAC3BF,KAAK,CAACG,IAAN,iCAAgBD,QAAQ,CAACE,IAAT,EAAhB;oBAAiCC,EAAE,EAAEH,QAAQ,CAACG;kBAA9C;gBACD,CAFD;gBAIAT,MAAM,CAAC,UAAD,EAAaI,KAAb,CAAN;gBAVqB;gBAAA;;cAAA;gBAAA;gBAAA;gBAYrBM,OAAO,CAACC,KAAR;;cAZqB;gBAAA;gBAcrBX,MAAM,CAAC,aAAD,EAAgB,KAAhB,CAAN;gBAdqB;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAgBxB,CAjBM;IAkBDY,aAlBC,uCAkB2C;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAA5BZ,MAA4B,SAA5BA,MAA4B;gBAAjBS,EAAiB,SAAjBA,EAAiB,EAAVI,OAAU;gBAChDb,MAAM,CAAC,aAAD,EAAgB,IAAhB,CAAN;gBADgD;gBAAA;gBAAA,OAGxCb,EAAE,CAACc,UAAH,CAAc,OAAd,EAAuBa,GAAvB,CAA2BL,EAA3B,EAA+BM,MAA/B,CAAsCF,OAAtC,CAHwC;;cAAA;gBAAA;gBAAA;;cAAA;gBAAA;gBAAA;gBAK9CH,OAAO,CAACC,KAAR,CAAcK,CAAd;;cAL8C;gBAAA;gBAO9ChB,MAAM,CAAC,aAAD,EAAgB,KAAhB,CAAN;gBAP8C;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IASjD;EA3BM;AAdgB,CAApB"},"metadata":{},"sourceType":"module"}