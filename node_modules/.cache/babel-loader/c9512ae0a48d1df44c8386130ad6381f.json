{"ast":null,"code":"import _regeneratorRuntime from \"/Users/matiasstephens/Documents/GitHub/bootcamp/G14/desafios-y-pruebas/37-autenticacion-con-vue-router-y-firebase/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/matiasstephens/Documents/GitHub/bootcamp/G14/desafios-y-pruebas/37-autenticacion-con-vue-router-y-firebase/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport Firebase from 'firebase';\nexport var sessionModule = {\n  namespaced: true,\n  state: {\n    user: null,\n    loading: false\n  },\n  getters: {\n    activeLogin: function activeLogin(state) {\n      return !!state.user;\n    }\n  },\n  mutations: {\n    SET_USER: function SET_USER(state, newUser) {\n      state.user = newUser;\n    },\n    SET_LOADING: function SET_LOADING(state, newLoading) {\n      state.loading = newLoading;\n    }\n  },\n  actions: {\n    subscribeToAuthStateChange: function subscribeToAuthStateChange(_ref) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var commit;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                commit = _ref.commit;\n                Firebase.auth().onAuthStateChanged(function (user) {\n                  commit('SET_USER', user);\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    signInWithEmailAndPassword: function signInWithEmailAndPassword(_ref2, credentials) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var commit;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                commit = _ref2.commit;\n                commit('SET_LOADING', true);\n                _context2.prev = 2;\n                _context2.next = 5;\n                return Firebase.auth().signInWithEmailAndPassword(credentials.email, credentials.password);\n\n              case 5:\n                _context2.next = 10;\n                break;\n\n              case 7:\n                _context2.prev = 7;\n                _context2.t0 = _context2[\"catch\"](2);\n                console.error('La mansa embarraita', _context2.t0);\n\n              case 10:\n                _context2.prev = 10;\n                commit('SET_LOADING', false);\n                return _context2.finish(10);\n\n              case 13:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[2, 7, 10, 13]]);\n      }))();\n    },\n    createUserWithEmailAndPassword: function createUserWithEmailAndPassword(_ref3, newUser) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var commit;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                commit = _ref3.commit;\n                commit('SET_LOADING', true);\n                _context3.prev = 2;\n                _context3.next = 5;\n                return Firebase.auth().createUserWithEmailAndPassword(newUser.email, newUser.password);\n\n              case 5:\n                _context3.next = 7;\n                return Firebase.firestore().collection('users').doc(newUser.email).set({\n                  name: '',\n                  lastName: '',\n                  birthDate: '',\n                  phoneNumber: '',\n                  role: 'user'\n                });\n\n              case 7:\n                _context3.next = 12;\n                break;\n\n              case 9:\n                _context3.prev = 9;\n                _context3.t0 = _context3[\"catch\"](2);\n                console.error(_context3.t0);\n\n              case 12:\n                _context3.prev = 12;\n                commit('SET_LOADING', false);\n                return _context3.finish(12);\n\n              case 15:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[2, 9, 12, 15]]);\n      }))();\n    },\n    signOut: function signOut(_ref4) {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var commit;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                commit = _ref4.commit;\n                commit('SET_LOADING', true);\n                _context4.prev = 2;\n                _context4.next = 5;\n                return Firebase.auth().signOut();\n\n              case 5:\n                _context4.next = 10;\n                break;\n\n              case 7:\n                _context4.prev = 7;\n                _context4.t0 = _context4[\"catch\"](2);\n                console.error('otra embarraita mas, me perd0n as¿', _context4.t0);\n\n              case 10:\n                _context4.prev = 10;\n                commit('SET_LOADING', false);\n                return _context4.finish(10);\n\n              case 13:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[2, 7, 10, 13]]);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["Firebase","sessionModule","namespaced","state","user","loading","getters","activeLogin","mutations","SET_USER","newUser","SET_LOADING","newLoading","actions","subscribeToAuthStateChange","commit","auth","onAuthStateChanged","signInWithEmailAndPassword","credentials","email","password","console","error","createUserWithEmailAndPassword","firestore","collection","doc","set","name","lastName","birthDate","phoneNumber","role","signOut"],"sources":["/Users/matiasstephens/Documents/GitHub/bootcamp/G14/desafios-y-pruebas/37-autenticacion-con-vue-router-y-firebase/src/store/modules/sessionModule.js"],"sourcesContent":["import Firebase from 'firebase';\n\nexport const sessionModule = {\n  namespaced: true,\n  state: {\n    user: null,\n    loading: false,\n  },\n  getters: {\n    activeLogin(state) {\n      return !!state.user;\n    },\n  },\n  mutations: {\n    SET_USER(state, newUser) {\n      state.user = newUser;\n    },\n    SET_LOADING(state, newLoading) {\n      state.loading = newLoading;\n    },\n  },\n  actions: {\n    async subscribeToAuthStateChange({ commit }) {\n      Firebase.auth().onAuthStateChanged((user) => {\n        commit('SET_USER', user);\n      });\n    },\n    async signInWithEmailAndPassword({ commit }, credentials) {\n      commit('SET_LOADING', true);\n      try {\n        await Firebase.auth().signInWithEmailAndPassword(\n          credentials.email,\n          credentials.password\n        );\n      } catch (e) {\n        console.error('La mansa embarraita', e);\n      } finally {\n        commit('SET_LOADING', false);\n      }\n    },\n    async createUserWithEmailAndPassword({ commit }, newUser) {\n      commit('SET_LOADING', true);\n\n      try {\n        await Firebase.auth().createUserWithEmailAndPassword(\n          newUser.email,\n          newUser.password\n        );\n        await Firebase.firestore().collection('users').doc(newUser.email).set({\n          name: '',\n          lastName: '',\n          birthDate: '',\n          phoneNumber: '',\n          role: 'user',\n        });\n      } catch (error) {\n        console.error(error);\n      } finally {\n        commit('SET_LOADING', false);\n      }\n    },\n    async signOut({ commit }) {\n      commit('SET_LOADING', true);\n      try {\n        await Firebase.auth().signOut();\n      } catch (e) {\n        console.error('otra embarraita mas, me perd0n as¿', e);\n      } finally {\n        commit('SET_LOADING', false);\n      }\n    },\n  },\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}